<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Tween - Canvas Example</title>
    <link href="css/examples.css" type="text/css" rel="stylesheet" />
    <link href="css/prettify.css" type="text/css" rel="stylesheet" />
    <link href="css/style.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/prettify.js"></script>
    <script src="js/Tween.js"></script>
    <link href="css/style.css" />
    <!-- Canvas Example -->
    <script>
        var fadeInAll = function(){
          var i = 0;
          var all = document.body.querySelectorAll("#container > *");
          for (node in all){
            ++i;
            var _node = all[node]
            if(typeof _node == "object"){
              _node.style.opacity = 0;
              var tw = new Tween();
              tw.node = _node;
              tw.duration = 400; 
              tw.delay = i * 150;
              tw.easing = Tween.Easing.Quint.easeIn; 
              tw.properties = {opacity:{begin:0, end:1}}
              tw.play();
            };
          }
        }
        var init = function(){

          prettyPrint();
          fadeInAll();
          // Grab the target
          var _target = document.getElementById("canvasTween");
          var _tweenButton = document.getElementById("tweenButton");
          var _codeButton = document.getElementById("showButton");
          var isShowingCode = false;

          var ctx = _target.getContext("2d");

          // Create the tween
          var _tween = new Tween();

          // Create the curve object
          var _curve = new Tween.Line([0, 255],[100,0]);
          var numRectangles = 100;

          var _onEnd = function(){
            _tween.reverse();
          }
          var rows = 4;
          var cols = 12;

          // Create the tween options;
          var _options = {
            node: ctx,    // The object we are going to tween
            duration:1000,    // The duration of the tween
            easing:Tween.Easing.Quint.easeInOut, //The easing for the tween
            curve:_curve,
            onAnimate:function(c){
              _target.width = _target.width;
              ctx.fillStyle = "rgba(" + ~~c[1] + ", 255, 255, 1)"
              for(var j = 0; j < cols; j++){
                for(var k = 0; k < rows; k++){
                  ctx.fillRect(j*100, k*100, c[0], c[0]);
                }
              }
            },
            onEnd:_onEnd
          }

          _target.onclick = _tweenButton.onclick = function tweenMe(){
            if (!_tween.isAnimating) _tween.play(_options);
          };

          var _t = new Tween();
          _t.node = document.querySelectorAll(".prettyprint")[0];
          _t.properties = {height:{begin:0, end:422, unit:"px"}};
          _t.easing = Tween.Easing.Expo.easeOut;
          _t.duration = 500;
          _t.onBegin = function(){
            _t.node.style.display = "block";
          };

          _t.onEnd = function(){
            _t.node.style.border = "1px grey dashed";
            _t.node.style.display = (isShowingCode == true) ? "block" : "none";
            _codeButton.innerHTML = (isShowingCode == true) ? "hide the code" : "show the code";
            _t.reverse();
          };

          _codeButton.onclick = function showCode(){            
            if (!_t.isAnimating) _t.play();
            isShowingCode = (isShowingCode == true) ? false : true;
          };
         }
        function getRandomLetter() {
          var rand26 = Math.floor( Math.random() * 26 );
          return ( ( 10 + rand26 ) / 36 ).toString(36).substring(2);
        }

      </script>
      <!-- End Tween.Line Example -->
</head>
<body onload="init()">
<div id="banner"><a href="http://github.com/dhaakon/beTween/">Fork me on GitHub</a></div>
<div id="container">
<div id="main-content">
<h1>Tween Example - Canvas</h1>
<hr>
<br>
<div id="viewport"><canvas id="canvasTween" width="1200" height="400"></canvas></div>
<div id="button-container"><button id="tweenButton" onclick="tweenMe()"> Tween </button><button id="showButton" onclick="showCode()"> Show the Code </button></div>
<pre class="prettyprint linenums" style="position:relative;">
// Grab the target
var _target = document.getElementById("rectangle");

// Create the tween
var _tween = new Tween();

// Create the curve object
var _curve = [40, 500]  

// Create the tween options;
var _options = {
    node: _target,    // The object we are going to tween
    duration:1000,    // The duration of the tween
    easing:Tween.Easing.Quint.easeInOut, //The easing for the tween
    curve:_curve,
    onAnimate:function(c){
      this.node.style.width = c + "px";
      this.node.style.top = (~~(c/2) - (_curve[0]/2)) + "px";
    },
    onEnd:_onEnd
 }
 
_tween.to(_options);      
  </pre>
</div>
<div id="sidebar">
  <ul class="links">
    <h1>something basic</h1>
    <li><a href="./CurveExample.html">Curve example</a></li>
    <li><a href="./LineExample.html">Line example</a></li>
    <li><a href="./PropertyExample.html">Property example</a></li>
    <h1 style="margin-top:30px;">something cool</h1>
    <li><a href="./LetterExample.html">Letter example</a></li>
    <li><a href="./CanvasExample.html">Canvas example</a></li>
    <li><a href="./PropertyExample.html">Property example</a></li>
    <h1 style="margin-top:30px;">more</h1>
    <li><a href="../index.html">Documentation</a></li>
  </ul>
</div>
</div>
</body>
</html>

