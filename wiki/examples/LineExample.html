<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tween - Line Example</title>
    <link href="css/examples.css" type="text/css" rel="stylesheet" />
    <link href="css/prettify.css" type="text/css" rel="stylesheet" />
    <link href="css/style.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/prettify.js"></script>
    <script src="js/Tween.js"></script>
    <style>
    </style>
    <!-- Line Example -->
    <script>
        var fadeInAll = function(){
          var i = 0;
          var all = document.body.querySelectorAll("#container > *");
          for (node in all){
            ++i;
            var _node = all[node]
            if(typeof _node == "object"){
              _node.style.opacity = 0;
              
              var tw = new Tween();
              tw.node = _node;

              tw.duration = 700; 
              tw.delay = i * 350;

              tw.duration = 400; 
              tw.delay = i * 150;

              tw.easing = Tween.Easing.Quint.easeIn; 
              tw.properties = {opacity:{begin:0, end:1}}
              tw.play();
            };
          }
        }
        var init = function(){


          prettyPrint();
          fadeInAll();
          
          // Grab the target
          var _target = document.getElementById("rectangle");
          var _tweenButton = document.getElementById("tweenButton");
          var _codeButton = document.getElementById("showButton");

          var isShowingCode = false;

          // Create the tween
          var _tween = new Tween();


          // Create the Line object
          var _line = new Tween.Line([0,0,0,0,0.4],[90,90,360,255,1]);
          

          var _onEnd = function(){
            _tween.reverse();
          }
            
          var _onAnimate = function(c){
            this.node.style.left = c[0] + "%";
            this.node.style.top = c[1] + "%";
            this.node.style['webkitTransform'] = 'rotate(' + c[2] + 'deg)'
            this.node.style.background = 'rgba(' + ~~c[3] + ', 0, 255, 1)';
            this.node.style.opacity = c[4];
          }

          // Create the tween options;
          var _options = {
            node: _target,    // The object we are going to tween
            duration:1000,    // The duration of the tween
            easing:Tween.Easing.Quint.easeInOut, //The easing for the tween
            curve:_line,
            onEnd:_onEnd,
            onAnimate:_onAnimate

          }

          _tweenButton.onclick = function tweenMe(){
            if (!_tween.isAnimating) _tween.play(_options);
          };     

          var _t = new Tween();
          _t.node = document.querySelectorAll(".prettyprint")[0];
          _t.properties = {height:{begin:0, end:422, unit:"px"}};
          _t.easing = Tween.Easing.Expo.easeOut;
          _t.duration = 500;
          
          _t.onBegin = function(){
            _t.node.style.display = "block";
          };
          
          _t.onEnd = function(){
            _t.node.style.border = "1px grey dashed";
            _t.node.style.display = (isShowingCode == true) ? "block" : "none";

            _codeButton.innerHTML = (isShowingCode == true) ? "hide the code" : "show the code";
            _t.reverse();
          };

          _codeButton.onclick = function showCode(){            
            if (!_t.isAnimating) _t.play();
            else return
            
            isShowingCode = (isShowingCode == true) ? false : true;
          };   
         }
      </script>
      <!-- End Line Example -->
</head>
<body onload="init()">
  <div id="container">
  <h1>Tween Example - Line</h1>
  <hr>
  <br>
  <div id="viewport"><div id="rectangle"></div></div>
  <div id="button-container"><button style="margin-left:0;" id="tweenButton" onclick="tweenMe()"> Tween </button><button id="showButton" onclick="showCode()"> Show the Code </button></div>
  <pre class="prettyprint" style="position:relative;">
// Grab the target
var _target = document.getElementById("circle");

// Create the tween
var _tween = new Tween();

// Create the Line object
// left, top, rotation, background, opacity
var _line = new Tween.Line([0,0,0,0,0],[90,90,360,255,1]);

var _onEnd = function(){
_tween.reverse();
}

var _onAnimate = function(c){
    this.node.style.left = c[0] + "%";
    this.node.style.top = c[1] + "%";
    this.node.style['webkitTransform'] = 'rotate(' + c[2] + 'deg)'
    this.node.style.background = 'rgba(' + ~~c[3] + ', 0, 255, 1)';
    this.node.style.opacity = c[4];
}  

  </pre>
  <ul id="links">
    <a href="./CurveExample.html">Curve example</a>
    <a href="./PropertyExample.html">Property example</a>
  </ul>
</div>
</body>
</html>

